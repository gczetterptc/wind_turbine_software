Upgraded firmware update process for reliability.
